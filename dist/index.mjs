import J,{useEffect as Ne,useMemo as Be,useRef as Ge,useState as Ue}from"react";var T=[["Afghanistan","af","93"],["Albania","al","355"],["Algeria","dz","213"],["Andorra","ad","376"],["Angola","ao","244"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54",{default:"(..) .... ....","/^11/":"(..) .... ....","/^15/":"(..) ... ....","/^(2|3|4|5)/":"(.) .... ....","/^9/":"(.) .... ....."},0],["Armenia","am","374",".. ......"],["Aruba","aw","297"],["Australia","au","61",{default:". .... ....","/^4/":"... ... ...","/^5(?!50)/":"... ... ...","/^1(3|8)00/":".... ... ...","/^13/":".. .. ..","/^180/":"... ...."},0,[]],["Austria","at","43"],["Azerbaijan","az","994","(..) ... .. .."],["Bahamas","bs","1242"],["Bahrain","bh","973"],["Bangladesh","bd","880"],["Barbados","bb","1246"],["Belarus","by","375","(..) ... .. .."],["Belgium","be","32","... .. .. .."],["Belize","bz","501"],["Benin","bj","229"],["Bhutan","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina","ba","387"],["Botswana","bw","267"],["Brazil","br","55","(..) .....-...."],["British Indian Ocean Territory","io","246"],["Brunei","bn","673"],["Bulgaria","bg","359"],["Burkina Faso","bf","226"],["Burundi","bi","257"],["Cambodia","kh","855"],["Cameroon","cm","237"],["Canada","ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde","cv","238"],["Caribbean Netherlands","bq","599","",1],["Cayman Islands","ky","1","... ... ....",4,["345"]],["Central African Republic","cf","236"],["Chad","td","235"],["Chile","cl","56"],["China","cn","86","... .... ...."],["Colombia","co","57","... ... ...."],["Comoros","km","269"],["Congo","cd","243"],["Congo","cg","242"],["Costa Rica","cr","506","....-...."],["C\xF4te d'Ivoire","ci","225",".. .. .. .. .."],["Croatia","hr","385"],["Cuba","cu","53"],["Cura\xE7ao","cw","599","",0],["Cyprus","cy","357",".. ......"],["Czech Republic","cz","420","... ... ..."],["Denmark","dk","45",".. .. .. .."],["Djibouti","dj","253",".. .. ...."],["Dominica","dm","1767"],["Dominican Republic","do","1","(...) ...-....",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt","eg","20"],["El Salvador","sv","503","....-...."],["Equatorial Guinea","gq","240"],["Eritrea","er","291"],["Estonia","ee","372",".... ......"],["Ethiopia","et","251",".. ... ...."],["Faroe Islands","fo","298",".. .. .."],["Fiji","fj","679"],["Finland","fi","358",".. ... .. .."],["France","fr","33",". .. .. .. .."],["French Guiana","gf","594","... .. .. .."],["French Polynesia","pf","689",{"/^44/":".. .. ..","/^80[0-5]/":"... .. .. ..",default:".. .. .. .."}],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia","ge","995"],["Germany","de","49","... ........."],["Ghana","gh","233"],["Greece","gr","30"],["Greenland","gl","299",".. .. .."],["Grenada","gd","1473"],["Guadeloupe","gp","590","... .. .. ..",0],["Guam","gu","1671"],["Guatemala","gt","502","....-...."],["Guinea","gn","224"],["Guinea-Bissau","gw","245"],["Guyana","gy","592"],["Haiti","ht","509","....-...."],["Honduras","hn","504"],["Hong Kong","hk","852",".... ...."],["Hungary","hu","36"],["Iceland","is","354","... ...."],["India","in","91",".....-....."],["Indonesia","id","62"],["Iran","ir","98","... ... ...."],["Iraq","iq","964"],["Ireland","ie","353",".. ......."],["Israel","il","972","... ... ...."],["Italy","it","39","... .......",0],["Jamaica","jm","1876"],["Japan","jp","81",".. .... ...."],["Jordan","jo","962"],["Kazakhstan","kz","7","... ...-..-..",0],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait","kw","965"],["Kyrgyzstan","kg","996","... ... ..."],["Laos","la","856"],["Latvia","lv","371",".. ... ..."],["Lebanon","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya","ly","218"],["Liechtenstein","li","423"],["Lithuania","lt","370"],["Luxembourg","lu","352"],["Macau","mo","853"],["Macedonia","mk","389"],["Madagascar","mg","261"],["Malawi","mw","265"],["Malaysia","my","60","..-....-...."],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596","... .. .. .."],["Mauritania","mr","222"],["Mauritius","mu","230"],["Mayotte","yt","262","... .. .. ..",1,["269","639"]],["Mexico","mx","52","... ... ....",0],["Micronesia","fm","691"],["Moldova","md","373","(..) ..-..-.."],["Monaco","mc","377"],["Mongolia","mn","976"],["Montenegro","me","382"],["Morocco","ma","212"],["Mozambique","mz","258"],["Myanmar","mm","95"],["Namibia","na","264"],["Nauru","nr","674"],["Nepal","np","977"],["Netherlands","nl","31",{"/^06/":"(.). .........","/^6/":". .........","/^0(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":"(.).. ........","/^(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":".. ........","/^0/":"(.)... .......",default:"... ......."}],["New Caledonia","nc","687"],["New Zealand","nz","64","...-...-...."],["Nicaragua","ni","505"],["Niger","ne","227"],["Nigeria","ng","234"],["North Korea","kp","850"],["Norway","no","47","... .. ..."],["Oman","om","968"],["Pakistan","pk","92","...-......."],["Palau","pw","680"],["Palestine","ps","970"],["Panama","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru","pe","51"],["Philippines","ph","63","... ... ...."],["Poland","pl","48","...-...-..."],["Portugal","pt","351"],["Puerto Rico","pr","1","(...) ...-....",3,["787","939"]],["Qatar","qa","974"],["R\xE9union","re","262","... .. .. ..",0],["Romania","ro","40"],["Russia","ru","7","(...) ...-..-..",1],["Rwanda","rw","250"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Pierre & Miquelon","pm","508",{"/^708/":"... ... ...","/^8/":"... .. .. ..",default:".. .. .."}],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["S\xE3o Tom\xE9 and Pr\xEDncipe","st","239"],["Saudi Arabia","sa","966"],["Senegal","sn","221"],["Serbia","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65","....-...."],["Slovakia","sk","421"],["Slovenia","si","386"],["Solomon Islands","sb","677"],["Somalia","so","252"],["South Africa","za","27"],["South Korea","kr","82","... .... ...."],["South Sudan","ss","211"],["Spain","es","34","... ... ..."],["Sri Lanka","lk","94"],["Sudan","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden","se","46","... ... ..."],["Switzerland","ch","41",".. ... .. .."],["Syria","sy","963"],["Taiwan","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia","tn","216"],["Turkey","tr","90","... ... .. .."],["Turkmenistan","tm","993"],["Tuvalu","tv","688"],["Uganda","ug","256"],["Ukraine","ua","380","(..) ... .. .."],["United Arab Emirates","ae","971"],["United Kingdom","gb","44",".... ......"],["United States","us","1","(...) ...-....",0],["Uruguay","uy","598"],["Uzbekistan","uz","998",".. ... .. .."],["Vanuatu","vu","678"],["Vatican City","va","39",".. .... ....",1],["Venezuela","ve","58"],["Vietnam","vn","84"],["Wallis & Futuna","wf","681",".. .. .."],["Yemen","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]];var Me="react-international-phone-",pe=(...r)=>r.filter(e=>!!e).join(" ").trim(),_e=(...r)=>pe(...r).split(" ").map(e=>`${Me}${e}`).join(" "),v=({addPrefix:r,rawClassNames:e})=>pe(_e(...r),...e);var me=({value:r,mask:e,maskSymbol:a,offset:s=0,trimNonMaskCharsLeftover:o=!1})=>{if(r.length<s)return r;let n=r.slice(0,s),p=r.slice(s),i=n,u=0;for(let d of e.split("")){if(u>=p.length){if(!o&&d!==a){i+=d;continue}break}d===a?(i+=p[u],u+=1):i+=d}return i};var B=r=>r?/^\d+$/.test(r):!1;var G=r=>r.replace(/\D/g,"");var fe=(r,e)=>{let a=r.style.display;a!=="block"&&(r.style.display="block");let s=r.getBoundingClientRect(),o=e.getBoundingClientRect(),n=o.top-s.top,p=s.bottom-o.bottom;n>=0&&p>=0||(Math.abs(n)<Math.abs(p)?r.scrollTop+=n:r.scrollTop-=p),r.style.display=a};var Re=r=>{let{name:e,iso2:a,dialCode:s,format:o,priority:n,areaCodes:p}=r,i=[e,a,s,o,n,p];for(let u=0;u<i.length;u+=1){if(u===0)continue;let d=i[u-1],l=i[u];if(d===void 0&&l!==void 0){let c=JSON.stringify(i,(m,y)=>y===void 0?"__undefined":y).replace(/"__undefined"/g,"undefined");throw new Error(`[react-international-phone] invalid country values passed to buildCountryData. Check ${d} in: ${c}`)}}return i.filter(u=>u!==void 0)};import{useCallback as Le,useEffect as xe,useMemo as Ae,useRef as $e,useState as Fe}from"react";var he=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("macintosh");var X=({phone:r,dialCode:e,prefix:a="+",charAfterDialCode:s=" "})=>{if(!r||!e)return r;let o=r;return o.startsWith(a)&&(o=o.replace(a,"")),o.startsWith(e)?(o=o.replace(e,""),o.startsWith(s)&&(o=o.replace(s,"")),o):r};var ye=(r,e)=>{let a=e.disableDialCodeAndPrefix?!1:e.forceDialCode,s=e.disableDialCodeAndPrefix?!1:e.insertDialCodeOnEmpty,o=r,n=d=>e.trimNonDigitsEnd?d.trim():d;if(!o)return s&&!o.length||a?n(`${e.prefix}${e.dialCode}${e.charAfterDialCode}`):n(o);if(o=G(o),o===e.dialCode&&!e.disableDialCodeAndPrefix)return n(`${e.prefix}${e.dialCode}${e.charAfterDialCode}`);if(e.dialCode.startsWith(o)&&!e.disableDialCodeAndPrefix)return n(a?`${e.prefix}${e.dialCode}${e.charAfterDialCode}`:`${e.prefix}${o}`);if(!o.startsWith(e.dialCode)&&!e.disableDialCodeAndPrefix){if(a)return n(`${e.prefix}${e.dialCode}${e.charAfterDialCode}`);if(o.length<e.dialCode.length)return n(`${e.prefix}${o}`)}let p=()=>{let d=e.dialCode.length,l=o.slice(0,d),c=o.slice(d);return{phoneLeftSide:l,phoneRightSide:c}},{phoneLeftSide:i,phoneRightSide:u}=p();return i=`${e.prefix}${i}${e.charAfterDialCode}`,u=me({value:u,mask:e.mask,maskSymbol:e.maskChar,trimNonMaskCharsLeftover:e.trimNonDigitsEnd||e.disableDialCodeAndPrefix&&u.length===0}),e.disableDialCodeAndPrefix&&(i=""),n(`${i}${u}`)};var Ce=({phoneBeforeInput:r,phoneAfterInput:e,phoneAfterFormatted:a,cursorPositionAfterInput:s,leftOffset:o=0,deletion:n})=>{if(s<o)return o;if(!r)return a.length;let p=null;for(let l=s-1;l>=0;l-=1)if(B(e[l])){p=l;break}if(p===null){for(let l=0;l<e.length;l+=1)if(B(a[l]))return l;return e.length}let i=0;for(let l=0;l<p;l+=1)B(e[l])&&(i+=1);let u=0,d=0;for(let l=0;l<a.length&&(u+=1,B(a[l])&&(d+=1),!(d>=i+1));l+=1);if(n!=="backward")for(;!B(a[u])&&u<a.length;)u+=1;return u};var W=({phone:r,prefix:e})=>r?`${e}${G(r)}`:"";function q({value:r,country:e,insertDialCodeOnEmpty:a,trimNonDigitsEnd:s,countries:o,prefix:n,charAfterDialCode:p,forceDialCode:i,disableDialCodeAndPrefix:u,defaultMask:d,countryGuessingEnabled:l,disableFormatting:c}){let m=r;u&&(m=m.startsWith(`${n}`)?m:`${n}${e.dialCode}${m}`);let y=l?ne({phone:m,countries:o,currentCountryIso2:e?.iso2}):void 0,D=y?.country??e,C=ye(m,{prefix:n,mask:oe({phone:m,country:D,defaultMask:d,disableFormatting:c}),maskChar:Y,dialCode:D.dialCode,trimNonDigitsEnd:s,charAfterDialCode:p,forceDialCode:i,insertDialCodeOnEmpty:a,disableDialCodeAndPrefix:u}),P=l&&!y?.fullDialCodeMatch?e:D;return{phone:W({phone:u?`${P.dialCode}${C}`:C,prefix:n}),inputValue:C,country:P}}var Ee=r=>{if(r?.toLocaleLowerCase().includes("delete")??!1)return r?.toLocaleLowerCase().includes("forward")?"forward":"backward"},ge=(r,{country:e,insertDialCodeOnEmpty:a,phoneBeforeInput:s,prefix:o,charAfterDialCode:n,forceDialCode:p,disableDialCodeAndPrefix:i,countryGuessingEnabled:u,defaultMask:d,disableFormatting:l,countries:c})=>{let m=r.nativeEvent,y=m.inputType,D=Ee(y),C=!!y?.startsWith("insertFrom"),P=y==="insertText",h=m?.data||void 0,b=r.target.value,x=r.target.selectionStart??0;if(y?.includes("history"))return{inputValue:s,phone:W({phone:s,prefix:o}),cursorPosition:s.length,country:e};if(P&&!B(h)&&b!==o)return{inputValue:s,phone:W({phone:i?`${e.dialCode}${s}`:s,prefix:o}),cursorPosition:x-(h?.length??0),country:e};if(p&&!b.startsWith(`${o}${e.dialCode}`)&&!C){let M=b?s:`${o}${e.dialCode}${n}`;return{inputValue:M,phone:W({phone:M,prefix:o}),cursorPosition:o.length+e.dialCode.length+n.length,country:e}}let{phone:S,inputValue:I,country:F}=q({value:b,country:e,trimNonDigitsEnd:D==="backward",insertDialCodeOnEmpty:a,countryGuessingEnabled:u,countries:c,prefix:o,charAfterDialCode:n,forceDialCode:p,disableDialCodeAndPrefix:i,disableFormatting:l,defaultMask:d}),K=Ce({cursorPositionAfterInput:x,phoneBeforeInput:s,phoneAfterInput:b,phoneAfterFormatted:I,leftOffset:p?o.length+e.dialCode.length+n.length:0,deletion:D});return{phone:S,inputValue:I,cursorPosition:K,country:F}};import{useState as ae}from"react";var be=(r,e)=>{let a=Object.keys(r),s=Object.keys(e);if(a.length!==s.length)return!1;for(let o of a)if(r[o]!==e[o])return!1;return!0};import{useRef as we}from"react";var ve=()=>{let r=we(),e=we(Date.now());return{check:()=>{let s=Date.now(),o=r.current?s-e.current:void 0;return r.current=e.current,e.current=s,o}}};var Te={size:20,overrideLastItemDebounceMS:-1};function Pe(r,e){let{size:a,overrideLastItemDebounceMS:s,onChange:o}={...Te,...e},[n,p]=ae(r),[i,u]=ae([n]),[d,l]=ae(0),c=ve();return[n,(C,P)=>{if(typeof C=="object"&&typeof n=="object"&&be(C,n)||C===n)return;let k=s>0,h=c.check(),b=k&&h!==void 0?h>s:!0;if(P?.overrideLastItem!==void 0?P.overrideLastItem:!b)u(S=>[...S.slice(0,d),C]);else{let S=i.length>=a;u(I=>[...I.slice(S?1:0,d+1),C]),S||l(I=>I+1)}p(C),o?.(C)},()=>{if(d<=0)return{success:!1};let C=i[d-1];return p(C),l(P=>P-1),o?.(C),{success:!0,value:C}},()=>{if(d+1>=i.length)return{success:!1};let C=i[d+1];return p(C),l(P=>P+1),o?.(C),{success:!0,value:C}}]}var Y=".",A={defaultCountry:"us",value:"",prefix:"+",defaultMask:"............",charAfterDialCode:" ",historySaveDebounceMS:200,disableCountryGuess:!1,disableDialCodePrefill:!1,forceDialCode:!1,disableDialCodeAndPrefix:!1,disableFormatting:!1,countries:T,preferredCountries:[]},ie=({defaultCountry:r=A.defaultCountry,value:e=A.value,countries:a=A.countries,prefix:s=A.prefix,defaultMask:o=A.defaultMask,charAfterDialCode:n=A.charAfterDialCode,historySaveDebounceMS:p=A.historySaveDebounceMS,disableCountryGuess:i=A.disableCountryGuess,disableDialCodePrefill:u=A.disableDialCodePrefill,forceDialCode:d=A.forceDialCode,disableDialCodeAndPrefix:l=A.disableDialCodeAndPrefix,disableFormatting:c=A.disableFormatting,onChange:m,inputRef:y})=>{let P={countries:a,prefix:s,charAfterDialCode:n,forceDialCode:l?!1:d,disableDialCodeAndPrefix:l,defaultMask:o,countryGuessingEnabled:!i,disableFormatting:c},k=$e(null),h=y||k,b=w=>{Promise.resolve().then(()=>{typeof window>"u"||h.current!==document?.activeElement||h.current?.setSelectionRange(w,w)})},[{phone:x,inputValue:S,country:I},F,K,M]=Pe(()=>{let w=V({value:r,field:"iso2",countries:a});w||console.error(`[react-international-phone]: can not find a country with "${r}" iso2 code`);let _=w||V({value:"us",field:"iso2",countries:a}),{phone:t,inputValue:f,country:g}=q({value:e,country:_,insertDialCodeOnEmpty:!u,...P});return b(f.length),{phone:t,inputValue:f,country:g.iso2}},{overrideLastItemDebounceMS:p,onChange:({inputValue:w,phone:_,country:t})=>{if(!m)return;let f=j(t);m({phone:_,inputValue:w,country:f})}}),j=Le(w=>V({value:w,field:"iso2",countries:a}),[a]),z=Ae(()=>j(I),[I,j]);xe(()=>{let w=h.current;if(!w)return;let _=t=>{if(!t.key)return;let f=t.ctrlKey,g=t.metaKey,N=t.shiftKey;if(t.key.toLowerCase()==="z"){if(he()){if(!g)return}else if(!f)return;N?M():K()}};return w.addEventListener("keydown",_),()=>{w.removeEventListener("keydown",_)}},[h,K,M]);let U=w=>{w.preventDefault();let{phone:_,inputValue:t,country:f,cursorPosition:g}=ge(w,{country:z,phoneBeforeInput:S,insertDialCodeOnEmpty:!1,...P});return F({inputValue:t,phone:_,country:f.iso2}),b(g),e},O=(w,_={focusOnInput:!1})=>{let t=V({value:w,field:"iso2",countries:a});if(!t){console.error(`[react-international-phone]: can not find a country with "${w}" iso2 code`);return}let f;l?f=S:f=X({phone:S,dialCode:z.dialCode,prefix:s,charAfterDialCode:n});let g=f.trim().length>0,N,R;if(g){let re=l?f:`${s}${t.dialCode}${n}${f}`,ce=q({value:re,country:t,insertDialCodeOnEmpty:!1,...P});N=ce.inputValue,R=ce.phone}else N=l?"":`${s}${t.dialCode}${n}`,R=`${s}${t.dialCode}`;F({inputValue:N,phone:R,country:t.iso2}),_.focusOnInput&&Promise.resolve().then(()=>{h.current?.focus()})},[L,H]=Fe(!1);return xe(()=>{if(!L){H(!0),e!==x&&m?.({inputValue:S,phone:x,country:z});return}if(e===x)return;let{phone:w,inputValue:_,country:t}=q({value:e,country:z,insertDialCodeOnEmpty:!u,...P});F({phone:w,inputValue:_,country:t.iso2})},[e]),{phone:x,inputValue:S,country:z,setCountry:O,handlePhoneValueChange:U,inputRef:h}};var oe=({phone:r,country:e,defaultMask:a="............",disableFormatting:s=!1})=>{let o=e.format,n=i=>s?i.replace(new RegExp(`[^${Y}]`,"g"),""):i;if(!o)return n(a);if(typeof o=="string")return n(o);if(!o.default)return console.error(`[react-international-phone]: default mask for ${e.iso2} is not provided`),n(a);let p=Object.keys(o).find(i=>{if(i==="default")return!1;if(!(i.charAt(0)==="/"&&i.charAt(i.length-1)==="/"))return console.error(`[react-international-phone]: format regex "${i}" for ${e.iso2} is not valid`),!1;let d=new RegExp(i.substring(1,i.length-1)),l=r.replace(e.dialCode,"");return d.test(G(l))});return n(p?o[p]:o.default)};var E=r=>{let[e,a,s,o,n,p]=r;return{name:e,iso2:a,dialCode:s,format:o,priority:n,areaCodes:p}};var ze=r=>`Field "${r}" is not supported`,V=({field:r,value:e,countries:a=T})=>{if(["priority"].includes(r))throw new Error(ze(r));let s=a.find(o=>{let n=E(o);return e===n[r]});if(s)return E(s)};var ne=({phone:r,countries:e=T,currentCountryIso2:a})=>{let s={country:void 0,fullDialCodeMatch:!1};if(!r)return s;let o=G(r);if(!o)return s;let n=s,p=({country:i,fullDialCodeMatch:u})=>{let d=i.dialCode===n.country?.dialCode,l=(i.priority??0)<(n.country?.priority??0);(!d||l)&&(n={country:i,fullDialCodeMatch:u})};for(let i of e){let u=E(i),{dialCode:d,areaCodes:l}=u;if(o.startsWith(d)){let c=n.country?Number(d)>=Number(n.country.dialCode):!0;if(l){let m=o.substring(d.length);for(let y of l)if(m.startsWith(y))return{country:u,fullDialCodeMatch:!0}}(c||d===o||!n.fullDialCodeMatch)&&p({country:u,fullDialCodeMatch:!0})}n.fullDialCodeMatch||o.length<d.length&&d.startsWith(o)&&(!n.country||Number(d)<=Number(n.country.dialCode))&&p({country:u,fullDialCodeMatch:!1})}if(a){let i=V({value:a,field:"iso2",countries:e});if(!i)return n;let d=i?(c=>{if(!c?.areaCodes)return!1;let m=o.substring(c.dialCode.length);return c.areaCodes.some(y=>y.startsWith(m))})(i):!1;!!n&&n.country?.dialCode===i.dialCode&&n.country!==i&&n.fullDialCodeMatch&&(!i.areaCodes||d)&&(n={country:i,fullDialCodeMatch:!0})}return n};import Se from"react";var He=(r,e)=>{let a=parseInt(r,16);return Number(a+e).toString(16)},Ve="abcdefghijklmnopqrstuvwxyz",Ke="1f1e6",De=Ve.split("").reduce((r,e,a)=>({...r,[e]:He(Ke,a)}),{}),Oe=r=>[De[r[0]],De[r[1]]].join("-"),Q=({iso2:r,size:e,src:a,protocol:s="https",disableLazyLoading:o,className:n,style:p,...i})=>{if(!r)return Se.createElement("img",{className:v({addPrefix:["flag-emoji"],rawClassNames:[n]}),width:e,height:e,...i});let u=()=>{if(a)return a;let d=Oe(r);return`${s}://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/${d}.svg`};return Se.createElement("img",{className:v({addPrefix:["flag-emoji"],rawClassNames:[n]}),src:u(),width:e,height:e,draggable:!1,"data-country":r,loading:o?void 0:"lazy",style:{width:e,height:e,...p},alt:"",...i})};import $,{useCallback as Z,useEffect as ee,useMemo as ke,useRef as se,useState as Ie}from"react";var je=1e3,le=({show:r,dialCodePrefix:e="+",selectedCountry:a,countries:s=T,preferredCountries:o=[],flags:n,onSelect:p,enableSearch:i=!0,searchPlaceholder:u="Search countries or dial codes...",noResultsMessage:d="No results found",onClose:l,...c})=>{let m=se(null),y=se(),[D,C]=Ie(""),P=ke(()=>{if(!o||!o.length)return s;let t=[],f=[...s];for(let g of o){let N=f.findIndex(R=>E(R).iso2===g);if(N!==-1){let R=f.splice(N,1)[0];t.push(R)}}return t.concat(f)},[s,o]),k=ke(()=>D?P.filter(t=>{let f=E(t);return f.name.toLowerCase().includes(D.toLowerCase())||f.dialCode.includes(D)}):P,[P,D]),h=se({updatedAt:void 0,value:""}),b=t=>{let f=h.current.updatedAt&&new Date().getTime()-h.current.updatedAt.getTime()>je;h.current={value:f?t:`${h.current.value}${t}`,updatedAt:new Date};let g=k.findIndex(N=>E(N).name.toLowerCase().startsWith(h.current.value));g!==-1&&I(g)},x=Z(t=>k.findIndex(f=>E(f).iso2===t),[k]),[S,I]=Ie(x(a)),F=()=>{y.current!==a&&I(x(a))},K=Z(t=>{I(x(t.iso2)),p?.(t)},[p,x]),M=t=>{let f=k.length-1,g=N=>t==="prev"?N-1:t==="next"?N+1:t==="last"?f:0;I(N=>{let R=g(N);return R<0?0:R>f?f:R})},j=t=>{t.key==="Escape"?(t.stopPropagation(),l?.()):t.key==="ArrowDown"||t.key==="ArrowUp"?(t.preventDefault(),H()&&(t.key==="ArrowDown"?M("next"):t.key==="ArrowUp"&&M("prev"))):t.key==="Tab"&&!t.shiftKey?(t.preventDefault(),H()):t.key==="Tab"&&t.shiftKey&&l?.()},z=t=>{if(t.stopPropagation(),t.key==="Enter"){if(t.preventDefault(),k.length>0&&S>=0){let f=E(k[S]);K(f)}return}if(t.key==="Escape"){t.preventDefault(),l?.();return}if(t.key==="ArrowUp"){if(t.preventDefault(),S<=0&&i){L();return}M("prev");return}if(t.key==="Tab"){if(t.shiftKey&&i){t.preventDefault(),L();return}else if(!t.shiftKey){t.preventDefault(),l?.();return}}if(t.key==="ArrowDown"){t.preventDefault(),M("next");return}if(t.key==="PageUp"){t.preventDefault(),M("first");return}if(t.key==="PageDown"){t.preventDefault(),M("last");return}t.key===" "&&t.preventDefault(),t.key.length===1&&!t.altKey&&!t.ctrlKey&&!t.metaKey&&b(t.key.toLocaleLowerCase())},U=t=>{C(t.target.value),k.length>0&&I(0)},O=Z(()=>{if(!m.current||S===void 0||k.length===0)return;let t=E(k[S]).iso2;if(t===y.current)return;let f=m.current.querySelector(`[data-country="${t}"]`);f&&(fe(m.current,f),y.current=t)},[S,k]);ee(()=>{O()},[S,O]);let L=Z(()=>{let t=document.querySelector(".react-international-phone-country-selector-dropdown__search-input");return t?(t.focus(),!0):!1},[]),H=Z(()=>m.current?(m.current.focus(),!0):!1,[]);ee(()=>{m.current&&(r?i?setTimeout(()=>{L()},0):H():(F(),C("")))},[r,i,L,H]),ee(()=>{F()},[a]),ee(()=>{r||(h.current={updatedAt:void 0,value:""})},[r]);let w=o&&o.length>0,_=k.map((t,f)=>{let g=E(t),N=w&&f===o.length-1,R=f===S;return $.createElement($.Fragment,{key:g.iso2},$.createElement("li",{"data-country":g.iso2,"data-testid":`${g.name} ${e}${g.dialCode}`,role:"option","aria-selected":g.iso2===a,className:v({addPrefix:["country-selector-dropdown__list-item",R&&"country-selector-dropdown__list-item--focused",g.iso2===a&&"country-selector-dropdown__list-item--selected"],rawClassNames:[c.listItemClassName]}),style:c.listItemStyle,onClick:()=>K(g)},$.createElement(Q,{iso2:g.iso2,src:n?.find(re=>re.iso2===g.iso2)?.src,className:v({addPrefix:["country-selector-dropdown__list-item-flag-emoji"],rawClassNames:[c.listItemFlagClassName]}),style:c.listItemFlagStyle}),$.createElement("span",{className:v({addPrefix:["country-selector-dropdown__list-item-country-name"],rawClassNames:[c.listItemCountryNameClassName]}),style:c.listItemCountryNameStyle},g.name),$.createElement("span",{"data-dialcode":g.dialCode,className:v({addPrefix:["country-selector-dropdown__list-item-dial-code"],rawClassNames:[c.listItemDialCodeClassName]}),style:c.listItemDialCodeStyle},e+g.dialCode)),N&&$.createElement("li",{role:"separator",className:v({addPrefix:["country-selector-dropdown__list-divider"],rawClassNames:[c.preferredListDividerClassName]}),style:c.preferredListDividerStyle}))});return $.createElement("div",{className:v({addPrefix:["country-selector-dropdown"],rawClassNames:[c.className]}),style:{...c.style,display:r?"flex":"none"},onMouseDown:t=>{t.stopPropagation()},onClick:t=>{t.stopPropagation()}},i&&$.createElement("div",{className:v({addPrefix:["country-selector-dropdown__search-container"],rawClassNames:[c.searchContainerClassName]}),style:c.searchContainerStyle},$.createElement("input",{type:"text",placeholder:u,value:D,onChange:U,className:v({addPrefix:["country-selector-dropdown__search-input"],rawClassNames:[c.searchInputClassName]}),style:c.searchInputStyle,onClick:t=>{t.stopPropagation()},onMouseDown:t=>t.stopPropagation(),onKeyDown:j})),$.createElement("ul",{role:"listbox",tabIndex:0,className:v({addPrefix:["country-selector-dropdown__list"],rawClassNames:[]}),ref:m,onKeyDown:z,style:{outline:"none"}},k.length>0?_:$.createElement("li",{className:v({addPrefix:["country-selector-dropdown__no-results"],rawClassNames:[]})},d)))};var ue=({selectedCountry:r,onSelect:e,disabled:a,hideDropdown:s,countries:o=T,preferredCountries:n=[],flags:p,enableSearch:i,searchPlaceholder:u,noResultsMessage:d,renderButtonWrapper:l,...c})=>{let[m,y]=Ue(!1),D=Ge(null),C=Be(()=>{if(r)return V({value:r,field:"iso2",countries:o})},[o,r]);Ne(()=>{let h=b=>{m&&D.current&&!D.current.contains(b.target)&&y(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[m]),Ne(()=>{let h=b=>{if(m&&b.key==="Escape"){let x=b.target;(!D.current?.contains(x)||x===D.current)&&y(!1)}};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[m]);let P=h=>{h.key&&["ArrowUp","ArrowDown"].includes(h.key)&&(h.preventDefault(),y(!0))},k=()=>{let h={title:C?.name,onClick:()=>y(x=>!x),onMouseDown:x=>x.preventDefault(),onKeyDown:P,disabled:s||a,role:"combobox","aria-label":"Country selector","aria-haspopup":"listbox","aria-expanded":m},b=J.createElement("div",{className:v({addPrefix:["country-selector-button__button-content"],rawClassNames:[c.buttonContentWrapperClassName]}),style:c.buttonContentWrapperStyle},J.createElement(Q,{iso2:r,src:p?.find(x=>x.iso2===r)?.src,className:v({addPrefix:["country-selector-button__flag-emoji",a&&"country-selector-button__flag-emoji--disabled"],rawClassNames:[c.flagClassName]}),style:{visibility:r?"visible":"hidden",...c.flagStyle}}),!s&&J.createElement("div",{className:v({addPrefix:["country-selector-button__dropdown-arrow",a&&"country-selector-button__dropdown-arrow--disabled",m&&"country-selector-button__dropdown-arrow--active"],rawClassNames:[c.dropdownArrowClassName]}),style:c.dropdownArrowStyle}));return l?l({children:b,rootProps:h}):J.createElement("button",{...h,type:"button",className:v({addPrefix:["country-selector-button",m&&"country-selector-button--active",a&&"country-selector-button--disabled",s&&"country-selector-button--hide-dropdown"],rawClassNames:[c.buttonClassName]}),"data-country":r,style:c.buttonStyle},b)};return J.createElement("div",{className:v({addPrefix:["country-selector"],rawClassNames:[c.className]}),style:c.style,ref:D},k(),J.createElement(le,{show:m,countries:o,preferredCountries:n,flags:p,onSelect:h=>{y(!1),e?.(h)},selectedCountry:r,enableSearch:i,searchPlaceholder:u,noResultsMessage:d,onClose:()=>y(!1),...c.dropdownStyleProps}))};import We from"react";var de=({dialCode:r,prefix:e,disabled:a,style:s,className:o})=>We.createElement("div",{className:v({addPrefix:["dial-code-preview",a&&"dial-code-preview--disabled"],rawClassNames:[o]}),style:s},`${e}${r}`);import te,{forwardRef as qe,useImperativeHandle as Je}from"react";var Qe=qe(({value:r,onChange:e,countries:a=T,preferredCountries:s=[],hideDropdown:o,showDisabledDialCodeAndPrefix:n,disableFocusAfterCountrySelect:p,flags:i,enableCountrySearch:u=!0,countrySearchPlaceholder:d="Search countries or dial codes...",countryNoResultsMessage:l="No results found",style:c,className:m,inputStyle:y,inputClassName:D,countrySelectorStyleProps:C,dialCodePreviewStyleProps:P,inputProps:k,placeholder:h,disabled:b,name:x,onFocus:S,onBlur:I,required:F,autoFocus:K,...M},j)=>{let{phone:z,inputValue:U,inputRef:O,country:L,setCountry:H,handlePhoneValueChange:w}=ie({value:r,countries:a,...M,onChange:t=>{e?.(t.phone,{country:t.country,inputValue:t.inputValue})}}),_=M.disableDialCodeAndPrefix&&n&&L?.dialCode;return Je(j,()=>O.current?Object.assign(O.current,{setCountry:H,state:{phone:z,inputValue:U,country:L}}):null,[O,H,z,U,L]),te.createElement("div",{ref:j,className:v({addPrefix:["input-container"],rawClassNames:[m]}),style:c},te.createElement(ue,{onSelect:t=>H(t.iso2,{focusOnInput:!p}),flags:i,selectedCountry:L.iso2,countries:a,preferredCountries:s,disabled:b,hideDropdown:o,enableSearch:u,searchPlaceholder:d,noResultsMessage:l,...C}),_&&te.createElement(de,{dialCode:L.dialCode,prefix:M.prefix??"+",disabled:b,...P}),te.createElement("input",{role:"phone-input",onChange:w,value:U,type:"tel",ref:O,className:v({addPrefix:["input",b&&"input--disabled"],rawClassNames:[D]}),placeholder:h,disabled:b,style:y,name:x,onFocus:S,onBlur:I,autoFocus:K,required:F,...k}))});export{ue as CountrySelector,le as CountrySelectorDropdown,de as DialCodePreview,Q as FlagImage,Qe as PhoneInput,Re as buildCountryData,T as defaultCountries,oe as getActiveFormattingMask,V as getCountry,ne as guessCountryByPartialPhoneNumber,E as parseCountry,X as removeDialCode,ie as usePhoneInput};
